import spider_function

import re

if __name__ == "__main__":
    # sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')


    url = 'http://group-admin-test.sce.sohuno.com/user/group/info/?format=json&suid=246037298599266688'

    data_final = spider_function.getHtml(url)
    data_final = '{"status":200,"data":{"user_info":{"userName":"A馃惙馃惙渚�","suid":"246037298599266688","avatar":"https://c1c2133e2cc13.cdn.sohucs.com/s_v2min/pic/2017/07/06/258815459355294976.jpg","description":"[寰井绗慮[鍢垮樋][绗戝摥][涓€鑴稿緱鎰廬[娴侀蓟琛€]","followCount":21,"followerCount":13},"groups_info":[{"numbers":2,"gid":13261,"name":"娴嬭瘯缇�001","create_time":"2017-07-11T21:48:22.910","capacity":100},{"numbers":4,"gid":13260,"name":null,"create_time":"2017-07-11T21:45:46.207","capacity":100},{"numbers":5,"gid":13259,"name":"娴嬭瘯--002","create_time":"2017-07-11T21:44:52.741","capacity":100},{"numbers":6,"gid":13255,"name":"GIF缇�","create_time":"2017-07-05T13:06:20.195","capacity":100},{"numbers":4,"gid":13252,"name":null,"create_time":"2017-07-05T09:09:05.638","capacity":100},{"numbers":4,"gid":13243,"name":"gif娴嬭瘯3","create_time":"2017-07-04T16:44:38.474","capacity":100},{"numbers":3,"gid":13242,"name":"鐢佃瘽鐢佃瘽","create_time":"2017-07-04T16:44:03.060","capacity":100},{"numbers":4,"gid":13241,"name":"gif娴嬭瘯2","create_time":"2017-07-04T16:43:01.445","capacity":100},{"numbers":6,"gid":13238,"name":"gif娴嬭瘯鐢�","create_time":"2017-07-04T15:43:32.877","capacity":100},{"numbers":4,"gid":13237,"name":null,"create_time":"2017-07-03T16:41:28.000","capacity":100},{"numbers":5,"gid":13235,"name":"PR001","create_time":"2017-07-03T11:48:42.153","capacity":100},{"numbers":4,"gid":13233,"name":"缇よ亰1000","create_time":"2017-07-03T10:06:50.298","capacity":100},{"numbers":7,"gid":13231,"name":"1000","create_time":"2017-06-29T15:16:09.959","capacity":100},{"numbers":6,"gid":13224,"name":"缇よ亰010","create_time":"2017-06-28T11:45:31.758","capacity":100},{"numbers":3,"gid":13223,"name":"缇よ亰009","create_time":"2017-06-28T11:45:17.446","capacity":100},{"numbers":3,"gid":13222,"name":"缇よ亰008","create_time":"2017-06-28T11:45:01.867","capacity":100},{"numbers":3,"gid":13221,"name":"缇よ亰007","create_time":"2017-06-28T11:44:47.130","capacity":100},{"numbers":3,"gid":13220,"name":"缇よ亰006","create_time":"2017-06-28T11:44:16.747","capacity":100},{"numbers":3,"gid":13219,"name":"缇よ亰005","create_time":"2017-06-28T11:44:01.039","capacity":100},{"numbers":3,"gid":13218,"name":"缇よ亰004","create_time":"2017-06-28T11:43:38.560","capacity":100},{"numbers":3,"gid":13217,"name":"缇よ亰003","create_time":"2017-06-28T11:43:24.519","capacity":100},{"numbers":3,"gid":13216,"name":"缇よ亰002","create_time":"2017-06-28T11:43:09.684","capacity":100},{"numbers":4,"gid":13215,"name":"缇よ亰001","create_time":"2017-06-28T11:42:52.155","capacity":100},{"numbers":5,"gid":13214,"name":"400","create_time":"2017-06-28T08:55:39.435","capacity":100},{"numbers":5,"gid":13212,"name":"200","create_time":"2017-06-27T20:27:46.049","capacity":100},{"numbers":3,"gid":13211,"name":"100","create_time":"2017-06-27T20:23:08.320","capacity":100},{"numbers":3,"gid":13210,"name":null,"create_time":"2017-06-27T18:25:09.292","capacity":100},{"numbers":4,"gid":13209,"name":"鎴�","create_time":"2017-06-27T18:15:13.908","capacity":100},{"numbers":4,"gid":13208,"name":"娴嬭瘯鐙愬皬浠欏悗鍙颁笓鐢ㄧ兢","create_time":"2017-06-27T17:05:25.476","capacity":100},{"numbers":11,"gid":13207,"name":"100浜哄ぇ缇�","create_time":"2017-06-26T14:01:12.979","capacity":100},{"numbers":3,"gid":13206,"name":null,"create_time":"2017-06-26T09:39:09.520","capacity":100},{"numbers":3,"gid":13205,"name":null,"create_time":"2017-06-26T09:38:56.605","capacity":100},{"numbers":3,"gid":13204,"name":null,"create_time":"2017-06-26T09:38:49.679","capacity":100},{"numbers":9,"gid":13203,"name":null,"create_time":"2017-06-23T20:37:25.949","capacity":100},{"numbers":4,"gid":13170,"name":"A鐚尓渚犲缓鐨勭兢","create_time":"2017-06-05T17:56:58.653","capacity":100},{"numbers":2,"gid":13166,"name":null,"create_time":"2017-06-05T17:06:12.806","capacity":100},{"numbers":3,"gid":13165,"name":null,"create_time":"2017-06-05T16:59:00.297","capacity":100},{"numbers":2,"gid":13164,"name":null,"create_time":"2017-06-05T16:57:17.999","capacity":100},{"numbers":3,"gid":13163,"name":null,"create_time":"2017-06-05T16:50:24.913","capacity":100},{"numbers":2,"gid":13160,"name":null,"create_time":"2017-06-05T10:29:50.428","capacity":100}]},"msg":"Suceess"}'

#     pattern = re.compile('<span>(.*?)</span>', re.S)
    pattern = re.compile(
        '"gid":(.*?),"name', re.S)
    items = pattern.findall(data_final)
    print(items)

